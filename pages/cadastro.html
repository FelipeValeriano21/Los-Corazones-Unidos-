<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Los Corazones Unidos</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
<link rel="stylesheet" href="../Style/style.css">
<style>
  .hidden { display: none; }
  .alert { display: none; }
</style>
</head>
<body class="d-flex flex-column min-vh-100">

<header>
  <nav class="navbar navbar-expand-lg navbar-dark colorredtheme">
    <div class="container">
      <a class="navbar-brand fw-bold" href="../index.html">Los Corazones Unidos ü´Ä</a>
      
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="projetos.html">Quem somos</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="localizacao.html">Localiza√ß√£o</a>
          </li>

          <!-- Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Fazer a√ß√µes
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="cadastro.html" onclick="mostrarTela('form')">Novo Cadastro</a></li>
              <li><a class="dropdown-item" href="#" onclick="mostrarTela('tabela')">Lista de Cadastros</a></li>
            </ul>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>

<main class="container flex-grow-1">
  <div id="conteudo"></div>
</main>

<footer class="colorredtheme text-white text-center py-3 mt-auto">
  ¬© 2025 Los Corazones Unidos ‚Äî Todos os direitos reservados para Felipe Valeriano
</footer>

<script>
const conteudo = document.getElementById("conteudo");

function templateForm() {
  return `
    <div id="alerta" class="alert alert-danger mt-3" role="danger" style="display: none;">
      Formul√°rio enviado com sucesso!
    </div>


     <div class="text-center p-5">
      <h2 class="animate__animated animate__tada">Formulario de Inscri√ß√£o para ser voluntario</h2>
    </div>

    <form id="formVoluntario" class="m-4 formulario">

      <div class="mb-3">
        <label for="nome" class="form-label">Nome Completo</label>
        <input type="text" class="form-control" id="nome" placeholder="Digite seu nome completo">
      </div>

      <div class="mb-3">
        <label for="email" class="form-label">E-mail</label>
        <input type="email" class="form-control" id="email" placeholder="exemplo@email.com">
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label for="cpf" class="form-label">CPF</label>
            <input type="text" class="form-control" id="cpf" placeholder="000.000.000-00" maxlength="14" OnKeyPress="formatar('###.###.###-##',this)">
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-3">
            <label for="telefone" class="form-label">Telefone</label>
            <input type="tel" class="form-control" id="telefone" placeholder="(11) 99999-9999" maxlength="16" OnKeyPress="formatar('(##) # ####-####',this)">
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <label for="cep" class="form-label">CEP</label>
            <input type="text" class="form-control" id="cep" placeholder="00000-000" maxlength="9" OnKeyPress="formatar('#####-###',this)">
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-3">
            <label for="nascimento" class="form-label">Data de Nascimento</label>
            <input type="date" class="form-control" id="nascimento">
          </div>
        </div>
      </div>

      <div class="row">
         <div class="col-md-3">
          <div class="mb-3">
          <label for="estado " class="form-label">UF</label>
          <select id="estado" name="estado" class="form-control"  required>
            <option value="" >Selecione o estado</option>
            <option value="AC">AC - Acre</option>
            <option value="AL">AL - Alagoas</option>
            <option value="AP">AP - Amap√°</option>
            <option value="AM">AM - Amazonas</option>
            <option value="BA">BA - Bahia</option>
            <option value="CE">CE - Cear√°</option>
            <option value="DF">DF - Distrito Federal</option>
            <option value="ES">ES - Esp√≠rito Santo</option>
            <option value="GO">GO - Goi√°s</option>
            <option value="MA">MA - Maranh√£o</option>
            <option value="MT">MT - Mato Grosso</option>
            <option value="MS">MS - Mato Grosso do Sul</option>
            <option value="MG">MG - Minas Gerais</option>
            <option value="PA">PA - Par√°</option>
            <option value="PB">PB - Para√≠ba</option>
            <option value="PR">PR - Paran√°</option>
            <option value="PE">PE - Pernambuco</option>
            <option value="PI">PI - Piau√≠</option>
            <option value="RJ">RJ - Rio de Janeiro</option>
            <option value="RN">RN - Rio Grande do Norte</option>
            <option value="RS">RS - Rio Grande do Sul</option>
            <option value="RO">RO - Rond√¥nia</option>
            <option value="RR">RR - Roraima</option>
            <option value="SC">SC - Santa Catarina</option>
            <option value="SP">SP - S√£o Paulo</option>
            <option value="SE">SE - Sergipe</option>
            <option value="TO">TO - Tocantins</option>
          </select>
          </div>
        </div>
        <div class="col-md-3">
          <div class="mb-3">
            <label for="cidade" class="form-label">Cidade</label>
            <input type="text" class="form-control" id="cidade">
          </div>
        </div>
          <div class="col-md-6">
          <div class="mb-3">
            <label for="endereco" class="form-label">Endere√ßo</label>
            <input type="text" class="form-control" id="endereco" placeholder="Rua, n√∫mero, complemento">
          </div>
        </div>
  
      </div>

      <div class="text-end mt-4">
        <button type="reset" class="btn btn-danger me-2">Limpar</button>
        <button type="submit" class="btn btn-success" onclick="validarFormulario()">Quero fazer parte do time</button>
      </div>


  `;
}

function templateTabela() {
  return `
    <div class="animate__animated animate__fadeIn">
      <h2 class="text-center mb-4 my-5">Volunt√°rios Cadastrados</h2>
      <table class="table" id="tabela-local">
        <tr>
          <th>Nome</th>
          <th>Email</th>
          <th>Telefone</th>
          <th>Endere√ßo</th>
          <th>CEP</th>
          <th>A√ß√µes</th>
        </tr>
      </table>
    </div>
  `;
}

function mostrarTela(tela) {
  if(tela === 'form') {
    conteudo.innerHTML = templateForm();
    document.getElementById("formVoluntario").addEventListener("submit", cadastrarVoluntario);
  } else if(tela === 'tabela') {
    conteudo.innerHTML = templateTabela();
    listarVoluntarios();
  }
}

function cadastrarVoluntario(e) {
  e.preventDefault();

  const campos = ["nome", "email", "telefone", "endereco", "cep"];
  let valido = true;
  const alerta = document.getElementById("alerta");

  const voluntario = {};
  campos.forEach(id => {
    const valor = document.getElementById(id).value.trim();
    if(!valor) {
      valido = false;
      document.getElementById(id).style.border = "1px solid red";
    } else {
      document.getElementById(id).style.border = "1px solid #ccc";
      voluntario[id] = valor;
    }
  });

  if(!valido) {
    alerta.className = "alert alert-danger animate__animated animate__shakeX";
    alerta.textContent = "Por favor, preencha todos os campos obrigat√≥rios.";
    alerta.style.display = "block";
    return;
  }
  let voluntarios = JSON.parse(localStorage.getItem("voluntarios")) || [];
  voluntarios.push(voluntario);
  localStorage.setItem("voluntarios", JSON.stringify(voluntarios));

  alerta.className = "alert alert-success animate__animated animate__fadeIn";
  alerta.textContent = "Volunt√°rio cadastrado com sucesso!";
  alerta.style.display = "block";

  document.getElementById("formVoluntario").reset();
}

function listarVoluntarios() {
  const tabela = document.getElementById("tabela-local");
  const voluntarios = JSON.parse(localStorage.getItem("voluntarios")) || [];

  if(voluntarios.length === 0) {
    const linha = document.createElement("tr");
    linha.innerHTML = `<td colspan="6" class="text-center">Nenhum volunt√°rio cadastrado ainda.</td>`;
    tabela.appendChild(linha);
    return;
  }

  voluntarios.forEach((v, index) => {
    const linha = document.createElement("tr");
    linha.innerHTML = `
      <td>${v.nome}</td>
      <td>${v.email}</td>
      <td>${v.telefone}</td>
      <td>${v.endereco}</td>
      <td>${v.cep}</td>
      <td>
        <button class="btn btn-danger btn-sm" onclick="excluirVoluntario(${index})">Excluir</button>
      </td>
    `;
    tabela.appendChild(linha);
  });
}

function excluirVoluntario(index) {
  if(!confirm("Tem certeza que deseja excluir este volunt√°rio?")) return;
  let voluntarios = JSON.parse(localStorage.getItem("voluntarios")) || [];
  voluntarios.splice(index, 1);
  localStorage.setItem("voluntarios", JSON.stringify(voluntarios));
  mostrarTela('tabela');
}

mostrarTela('form');

</script>
  
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous">
  </script>

<script src="../JS/mascaras.js"></script>
</body>
</html>
